<div class="cds--content">
  <!-- Header passes the sidenav state to show the correct hamburger icon state -->
  <app-header
    [isExpanded]="isSidenavOpen"
    [showMenu]="(showMenuToggle$ | async) ?? false"
    (menuToggle)="onHeaderMenuToggle()"
  ></app-header>

  <div class="cds--content-layout">
    <!-- Backdrop for mobile only, overlays content when sidenav is open on mobile -->
    <div
      class="mobile-backdrop"
      [class.show]="isSidenavOpen && (showMenuToggle$ | async)"
      (click)="onMobileClose()"
    ></div>

    <!-- Pass the collapsed state to sidenav based on isSidenavOpen -->
    <app-sidenav
      [collapsed]="!isSidenavOpen"
      [expanded]="isSidenavOpen"
      (mobileClose)="onMobileClose()"
      (mobileToggle)="onSidenavToggle()"
    ></app-sidenav>

    <main
      class="cds--content-layout__content"
      [class.cds--content-layout__content--expanded]="!isSidenavOpen"
    >
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
